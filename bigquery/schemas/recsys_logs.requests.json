[
  {"name":"request_id","type":"STRING","mode":"REQUIRED"},
  {"name":"user_id","type":"STRING","mode":"NULLABLE"},
  {"name":"session_id","type":"STRING","mode":"NULLABLE"},
  {"name":"request_ts","type":"TIMESTAMP","mode":"REQUIRED"},
  {"name":"context","type":"RECORD","mode":"NULLABLE","fields":[
    {"name":"page","type":"STRING","mode":"NULLABLE"},
    {"name":"device","type":"STRING","mode":"NULLABLE"},
    {"name":"country","type":"STRING","mode":"NULLABLE"}
  ]},
  {"name":"model","type":"RECORD","mode":"NULLABLE","fields":[
    {"name":"name","type":"STRING","mode":"NULLABLE"},
    {"name":"version","type":"STRING","mode":"NULLABLE"},
    {"name":"profile","type":"STRING","mode":"NULLABLE"}
  ]},
  {"name":"req_features","type":"JSON","mode":"NULLABLE"},
  {"name":"items","type":"RECORD","mode":"REPEATED","fields":[
    {"name":"asin","type":"STRING","mode":"REQUIRED"},
    {"name":"score","type":"FLOAT","mode":"NULLABLE"},
    {"name":"rank","type":"INTEGER","mode":"NULLABLE"}
  ]},
  {"name":"latency_ms","type":"INTEGER","mode":"NULLABLE"},
  {"name":"trace_id","type":"STRING","mode":"NULLABLE"},
  {"name":"experiment","type":"RECORD","mode":"NULLABLE","fields":[
    {"name":"name","type":"STRING","mode":"NULLABLE"},
    {"name":"variant","type":"STRING","mode":"NULLABLE"}
  ]}
]

